###############################################################################
#
#  Elastic config
#
###############################################################################
elasticsearch:
    host: localhost
    port: 9200
    log: warning

###############################################################################
#
#  Surveys config
#
###############################################################################
surveys:
    - id: stateofjs
      releases:
          - id: '2016'
            typeform_id: Mulmxw
            transformers: []
            sections:
                - id: JAVASCRIPT_FLAVORS
                  title: JavaScript Flavor
                - id: FRONTEND_FRAMEWORKS
                  title: Front-End
                  freeform: Other Front-End Frameworks
                - id: STATE_MANAGEMENT
                  title: State Management
                  freeform: Other State Management Libraries
                - id: DATA_LAYER
                  title: API Layer
                  freeform: Other API layer solutions
                - id: BACKEND_FRAMEWORKS
                  title: Stacks
                  freeform: Other stacks
                - id: TESTING
                  title: Testing
                  freeform: Other testing frameworks
                - id: CSS
                  title: CSS
                  freeform: Other CSS solutions
                - id: BUILD_TOOLS
                  title: Build Tools
                  freeform: Other build tools
                - id: MOBILE_DESKTOP
                  title: Mobile
                  freeform: Other mobile apps solutions
          - id: '2017'
            typeform_id: S5iLk9
            transformers: []
          - id: '2018'
            typeform_id: J9gRJf
            transformers: []
    - id: stateofcss
      releases:
          - id: '2019'
            typeform_id: TxDuh6
            transformers:
                - type: normalize_typeform
                - type: cleanup
                  config:
                      fields:
                          - pre_postprocessors_other_other
                          - cssframeworks_other_other
                          - methodologies_other_other
                          - cssinjs_other_other
                - type: user_info
                  config:
                      fields:
                          - email
                          - company_size
                          - yearly_salary
                - type: geo
                  config:
                      fields:
                          - country
                - type: dict_mapper
                  config:
                      dict: years_of_experience
                      fields:
                          - aboutyou_yearsofexperience
                - type: dict_mapper
                  config:
                      dict: usage
                      fields:
                          - layout_cssgrid
                          - layout_flexbox
                          - layout_cssmulticolumn
                          - layout_csswritingmodes
                          - layout_cssexclusions
                          - shapes_graphics_cssshapes
                          - shapes_graphics_objectfit
                          - shapes_graphics_clippath
                          - shapes_graphics_cssmasks
                          - shapes_graphics_blendmodes
                          - shapes_graphics_cssfiltereffects
                          - interactions_cssscrollsnap
                          - interactions_overscrollbehavior
                          - interactions_overflowanchor
                          - typography_webfonts_fontface
                          - typography_variablefonts
                          - typography_linebreakingproperties_overflowwrap_wordbreak_linebreak_hyphens
                          - typography_fontvariant
                          - typography_initialletter
                          - animations_transforms_csstransitions
                          - animations_transforms_csstransforms
                          - animations_transforms_cssanimations
                          - otherfeatures_cssvariables
                          - otherfeatures_featuresupportqueries_supports
                          - otherfeatures_csscontainment
                          - otherfeatures_willchange
                          - otherfeatures_calc
                - type: dict_mapper
                  config:
                      dict: opinion
                      fields:
                          - pre_postprocessors_sass
                          - pre_postprocessors_less
                          - pre_postprocessors_postcss
                          - pre_postprocessors_stylus
                          - pre_postprocessors_other_other
                          - cssframeworks_bootstrap
                          - cssframeworks_materializecss
                          - cssframeworks_antdesign
                          - cssframeworks_semanticui
                          - cssframeworks_bulma
                          - cssframeworks_foundation
                          - cssframeworks_uikit
                          - cssframeworks_tachyons
                          - cssframeworks_primer
                          - cssframeworks_tailwind
                          - cssframeworks_purecss
                          - methodologies_bem
                          - methodologies_atomiccss
                          - methodologies_oocss
                          - methodologies_smacss
                          - methodologies_itcss
                          - cssinjs_styledcomponents
                          - cssinjs_glamor
                          - cssinjs_aphrodite
                          - cssinjs_jss
                          - cssinjs_styledjsx
                          - cssinjs_radium
                          - cssinjs_emotion
                          - cssinjs_cssmodules
                - type: normalize
                  config:
                      normalization: pre_post_processors
                      fields: [pre_postprocessors_other_other]
                - type: normalize
                  config:
                      normalization: css_frameworks
                      fields: [cssframeworks_other_other]
                - type: normalize
                  config:
                      normalization: methodologies
                      fields: [methodologies_other_other]
                - type: normalize
                  config:
                      normalization: css_in_js
                      fields: [cssinjs_other_other]
                - type: to_object
            sections:
                - id: FEATURES
                - id: TOOLS
                - id: ENVIRONMENTS
                - id: RESOURCES
                - id: OPINIONS
                - id: USER_INFO
            aggregations:
                - section: new-demographics
                  items:
                      - id: by_country
                        type: terms
                        field: aboutyou_yourcountry
                        size: 300
                      - id: by_city
                        type: terms
                        field: aboutyou_yourcity
                        size: 300
                      - id: gender_breakdown
                        type: terms
                        field: aboutyou_yourgender
                      - id: salary
                        type: terms
                        field: aboutyou_yearlysalary
                      - id: company_size
                        type: terms
                        field: aboutyou_companysize
                      - id: years_of_experience
                        type: terms
                        field: aboutyou_yearsofexperience
                - section: layout
                  dest: features_usage
                  items:
                      - id: css-grid
                        aggregations:
                            usage:
                                type: terms
                                field: layout_cssgrid
                            usageByExperience:
                                type: terms_sub_filter
                                field: aboutyou_yearsofexperience
                                filter:
                                    term:
                                        layout_cssgrid.value.keyword: used_it
                      - id: flexbox
                        aggregations:
                            usage:
                                type: terms
                                field: layout_flexbox
                            usageByExperience:
                                type: terms_sub_filter
                                field: aboutyou_yearsofexperience
                                filter:
                                    term:
                                        layout_flexbox.value.keyword: used_it
                      - id: css-multi-column
                        aggregations:
                            usage:
                                type: terms
                                field: layout_cssmulticolumn
                            usageByExperience:
                                type: terms_sub_filter
                                field: aboutyou_yearsofexperience
                                filter:
                                    term:
                                        layout_cssmulticolumn.value.keyword: used_it
                      - id: css-writing-modes
                        aggregations:
                            usage:
                                type: terms
                                field: layout_csswritingmodes
                            usageByExperience:
                                type: terms_sub_filter
                                field: aboutyou_yearsofexperience
                                filter:
                                    term:
                                        layout_csswritingmodes.value.keyword: used_it
                      - id: css-exclusions
                        aggregations:
                            usage:
                                type: terms
                                field: layout_cssexclusions
                            usageByExperience:
                                type: terms_sub_filter
                                field: aboutyou_yearsofexperience
                                filter:
                                    term:
                                        layout_cssexclusions.value.keyword: used_it
                - section: shapes-and-graphics
                  dest: features_usage
                  items:
                      - id: css-shapes
                        aggregations:
                            usage:
                                type: terms
                                field: shapes_graphics_cssshapes
                            usageByExperience:
                                type: terms_sub_filter
                                field: aboutyou_yearsofexperience
                                filter:
                                    term:
                                        shapes_graphics_cssshapes.value.keyword: used_it
                      - id: object-fit
                        aggregations:
                            usage:
                                type: terms
                                field: shapes_graphics_objectfit
                            usageByExperience:
                                type: terms_sub_filter
                                field: aboutyou_yearsofexperience
                                filter:
                                    term:
                                        shapes_graphics_objectfit.value.keyword: used_it
                      - id: clip-path
                        aggregations:
                            usage:
                                type: terms
                                field: shapes_graphics_clippath
                            usageByExperience:
                                type: terms_sub_filter
                                field: aboutyou_yearsofexperience
                                filter:
                                    term:
                                        shapes_graphics_clippath.value.keyword: used_it
                      - id: css-masks
                        aggregations:
                            usage:
                                type: terms
                                field: shapes_graphics_cssmasks
                            usageByExperience:
                                type: terms_sub_filter
                                field: aboutyou_yearsofexperience
                                filter:
                                    term:
                                        shapes_graphics_cssmasks.value.keyword: used_it
                      - id: blend-modes
                        aggregations:
                            usage:
                                type: terms
                                field: shapes_graphics_blendmodes
                            usageByExperience:
                                type: terms_sub_filter
                                field: aboutyou_yearsofexperience
                                filter:
                                    term:
                                        shapes_graphics_blendmodes.value.keyword: used_it

                      - id: css-filter-effects
                        aggregations:
                            usage:
                                type: terms
                                field: shapes_graphics_cssfiltereffects
                            usageByExperience:
                                type: terms_sub_filter
                                field: aboutyou_yearsofexperience
                                filter:
                                    term:
                                        shapes_graphics_cssfiltereffects.value.keyword: used_it
                - section: interactions
                  dest: features_usage
                  items:
                      - id: css-scroll-snap
                        aggregations:
                            usage:
                                type: terms
                                field: interactions_cssscrollsnap
                            usageByExperience:
                                type: terms_sub_filter
                                field: aboutyou_yearsofexperience
                                filter:
                                    term:
                                        interactions_cssscrollsnap.value.keyword: used_it
                      - id: overscroll-behavior
                        aggregations:
                            usage:
                                type: terms
                                field: interactions_overscrollbehavior
                            usageByExperience:
                                type: terms_sub_filter
                                field: aboutyou_yearsofexperience
                                filter:
                                    term:
                                        interactions_overscrollbehavior.value.keyword: used_it
                      - id: overflow-anchor
                        aggregations:
                            usage:
                                type: terms
                                field: interactions_overflowanchor
                            usageByExperience:
                                type: terms_sub_filter
                                field: aboutyou_yearsofexperience
                                filter:
                                    term:
                                        interactions_overflowanchor.value.keyword: used_it
                - section: typography
                  dest: features_usage
                  items:
                      - id: web-fonts-font-face
                        aggregations:
                            usage:
                                type: terms
                                field: typography_webfonts_fontface
                            usageByExperience:
                                type: terms_sub_filter
                                field: aboutyou_yearsofexperience
                                filter:
                                    term:
                                        typography_webfonts_fontface.value.keyword: used_it
                      - id: variable-fonts
                        aggregations:
                            usage:
                                type: terms
                                field: typography_variablefonts
                            usageByExperience:
                                type: terms_sub_filter
                                field: aboutyou_yearsofexperience
                                filter:
                                    term:
                                        typography_variablefonts.value.keyword: used_it
                      - id: line-breaking-properties
                        aggregations:
                            usage:
                                type: terms
                                field: typography_linebreakingproperties_overflowwrap_wordbreak_linebreak_hyphens
                            usageByExperience:
                                type: terms_sub_filter
                                field: aboutyou_yearsofexperience
                                filter:
                                    term:
                                        typography_linebreakingproperties_overflowwrap_wordbreak_linebreak_hyphens.value.keyword: used_it
                      - id: font-variant
                        aggregations:
                            usage:
                                type: terms
                                field: typography_fontvariant
                            usageByExperience:
                                type: terms_sub_filter
                                field: aboutyou_yearsofexperience
                                filter:
                                    term:
                                        typography_fontvariant.value.keyword: used_it
                      - id: initial-letter
                        aggregations:
                            usage:
                                type: terms
                                field: typography_initialletter
                            usageByExperience:
                                type: terms_sub_filter
                                field: aboutyou_yearsofexperience
                                filter:
                                    term:
                                        typography_initialletter.value.keyword: used_it
                - section: animations-and-transforms
                  dest: features_usage
                  items:
                      - id: css-transitions
                        aggregations:
                            usage:
                                type: terms
                                field: animations_transforms_csstransitions
                            usageByExperience:
                                type: terms_sub_filter
                                field: aboutyou_yearsofexperience
                                filter:
                                    term:
                                        animations_transforms_csstransitions.value.keyword: used_it
                      - id: css-transforms
                        aggregations:
                            usage:
                                type: terms
                                field: animations_transforms_csstransforms
                            usageByExperience:
                                type: terms_sub_filter
                                field: aboutyou_yearsofexperience
                                filter:
                                    term:
                                        animations_transforms_csstransforms.value.keyword: used_it
                      - id: css-animations
                        aggregations:
                            usage:
                                type: terms
                                field: animations_transforms_cssanimations
                            usageByExperience:
                                type: terms_sub_filter
                                field: aboutyou_yearsofexperience
                                filter:
                                    term:
                                        animations_transforms_cssanimations.value.keyword: used_it
                - section: other-features
                  dest: features_usage
                  items:
                      - id: css-variables
                        aggregations:
                            usage:
                                type: terms
                                field: otherfeatures_cssvariables
                            usageByExperience:
                                type: terms_sub_filter
                                field: aboutyou_yearsofexperience
                                filter:
                                    term:
                                        otherfeatures_cssvariables.value.keyword: used_it
                      - id: support-queries
                        aggregations:
                            usage:
                                type: terms
                                field: otherfeatures_featuresupportqueries_supports
                            usageByExperience:
                                type: terms_sub_filter
                                field: aboutyou_yearsofexperience
                                filter:
                                    term:
                                        otherfeatures_featuresupportqueries_supports.value.keyword: used_it
                      - id: css-containment
                        aggregations:
                            usage:
                                type: terms
                                field: otherfeatures_csscontainment
                            usageByExperience:
                                type: terms_sub_filter
                                field: aboutyou_yearsofexperience
                                filter:
                                    term:
                                        otherfeatures_csscontainment.value.keyword: used_it
                      - id: will-change
                        aggregations:
                            usage:
                                type: terms
                                field: otherfeatures_willchange
                            usageByExperience:
                                type: terms_sub_filter
                                field: aboutyou_yearsofexperience
                                filter:
                                    term:
                                        otherfeatures_willchange.value.keyword: used_it
                      - id: calc
                        aggregations:
                            usage:
                                type: terms
                                field: otherfeatures_calc
                            usageByExperience:
                                type: terms_sub_filter
                                field: aboutyou_yearsofexperience
                                filter:
                                    term:
                                        otherfeatures_calc.value.keyword: used_it
                - section: units-and-selectors
                  dest: units-and-selectors
                  items:
                      - id: units
                        aggregations:
                            usage:
                                type: terms
                                field: units_selectors_units
                      - id: pseudo-elements
                        aggregations:
                            usage:
                                type: terms
                                field: units_selectors_pseudoelements
                      - id: combinators
                        aggregations:
                            usage:
                                type: terms
                                field: units_selectors_combinators
                      - id: tree-document-structure
                        aggregations:
                            usage:
                                type: terms
                                field: units_selectors_tree_documentstructure
                      - id: attributes
                        aggregations:
                            usage:
                                type: terms
                                field: units_selectors_attributes
                      - id: links-urls
                        aggregations:
                            usage:
                                type: terms
                                field: units_selectors_links_urls
                      - id: interaction
                        aggregations:
                            usage:
                                type: terms
                                field: units_selectors_interaction
                      - id: form-controls
                        aggregations:
                            usage:
                                type: terms
                                field: units_selectors_formcontrols
                - section: pre-post-processors
                  dest: tools
                  items:
                      - id: sass
                        aggregations:
                            opinion:
                                type: terms
                                field: pre_postprocessors_sass
                      - id: less
                        aggregations:
                            opinion:
                                type: terms
                                field: pre_postprocessors_less
                      - id: postcss
                        aggregations:
                            opinion:
                                type: terms
                                field: pre_postprocessors_postcss
                      - id: stylus
                        aggregations:
                            opinion:
                                type: terms
                                field: pre_postprocessors_stylus
                      - id: other-pre-post-processors
                        aggregations:
                            others:
                                type: terms
                                field: pre_postprocessors_other_other
                                size: 50
                - section: css-frameworks
                  dest: tools
                  items:
                      - id: bootstrap
                        aggregations:
                            opinion:
                                type: terms
                                field: cssframeworks_bootstrap
                      - id: materialize-css
                        aggregations:
                            opinion:
                                type: terms
                                field: cssframeworks_materializecss
                      - id: ant-design
                        aggregations:
                            opinion:
                                type: terms
                                field: cssframeworks_antdesign
                      - id: semantic-ui
                        aggregations:
                            opinion:
                                type: terms
                                field: cssframeworks_semanticui
                      - id: bulma
                        aggregations:
                            opinion:
                                type: terms
                                field: cssframeworks_bulma
                      - id: foundation
                        aggregations:
                            opinion:
                                type: terms
                                field: cssframeworks_foundation
                      - id: uikit
                        aggregations:
                            opinion:
                                type: terms
                                field: cssframeworks_uikit
                      - id: tachyons
                        aggregations:
                            opinion:
                                type: terms
                                field: cssframeworks_tachyons
                      - id: primer
                        aggregations:
                            opinion:
                                type: terms
                                field: cssframeworks_primer
                      - id: tailwind
                        aggregations:
                            opinion:
                                type: terms
                                field: cssframeworks_tailwind
                      - id: purecss
                        aggregations:
                            opinion:
                                type: terms
                                field: cssframeworks_purecss
                      - id: other-css-frameworks
                        aggregations:
                            others:
                                type: terms
                                field: cssframeworks_other_other
                - section: methodologies
                  dest: tools
                  items:
                      - id: bem
                        aggregations:
                            opinion:
                                type: terms
                                field: methodologies_bem
                      - id: atomic-css
                        aggregations:
                            opinion:
                                type: terms
                                field: methodologies_atomiccss
                      - id: oocss
                        aggregations:
                            opinion:
                                type: terms
                                field: methodologies_oocss
                      - id: smacss
                        aggregations:
                            opinion:
                                type: terms
                                field: methodologies_smacss
                      - id: it-css
                        aggregations:
                            opinion:
                                type: terms
                                field: methodologies_itcss
                      - id: other-methodologies
                        aggregations:
                            others:
                                type: terms
                                field: methodologies_other_other
                - section: css-in-js
                  dest: tools
                  items:
                      - id: styled-components
                        aggregations:
                            opinion:
                                type: terms
                                field: cssinjs_styledcomponents
                      - id: glamor
                        aggregations:
                            opinion:
                                type: terms
                                field: cssinjs_glamor
                      - id: aphrodite
                        aggregations:
                            opinion:
                                type: terms
                                field: cssinjs_aphrodite
                      - id: jss
                        aggregations:
                            opinion:
                                type: terms
                                field: cssinjs_jss
                      - id: styled-jsx
                        aggregations:
                            opinion:
                                type: terms
                                field: cssinjs_styledjsx
                      - id: radium
                        aggregations:
                            opinion:
                                type: terms
                                field: cssinjs_radium
                      - id: emotion
                        aggregations:
                            opinion:
                                type: terms
                                field: cssinjs_emotion
                      - id: css-modules
                        aggregations:
                            opinion:
                                type: terms
                                field: cssinjs_cssmodules
                      - id: other-css-in-js
                        aggregations:
                            others:
                                type: terms
                                field: cssinjs_other_other
                - section: other-tools
                  dest: other-tools
                  items:
                      - id: text-editors
                        aggregations:
                            usage:
                                type: terms
                                field: othertools_texteditors
                      - id: browsers
                        aggregations:
                            usage:
                                type: terms
                                field: othertools_browsers
                - section: environments
                  dest: environments
                  items:
                      - id: browsers
                        aggregations:
                            environments:
                                type: terms
                                field: environments_browsers
                      - id: form-factors
                        aggregations:
                            environments:
                                type: terms
                                field: environments_formfactors
                      # "environments_cssforprint": {
                      # "environments_cssforemailclients": {
                - section: resources
                  dest: learning-resources
                  items:
                      - id: blogs-magazines
                        aggregations:
                            resources:
                                type: terms
                                field: resources_blogs_magazines
                      - id: sites-courses
                        aggregations:
                            resources:
                                type: terms
                                field: resources_sites_courses
                      - id: podcasts
                        aggregations:
                            resources:
                                type: terms
                                field: resources_podcasts
                - section: opinions
                  dest: opinions
                  items:
                      - id: easy-to-learn
                        aggregations:
                            opinion:
                                type: terms
                                field: opinionquestions_cssiseasytolearn
                                isNumber: true
                      - id: evolving-too-slowly
                        aggregations:
                            opinion:
                                type: terms
                                field: opinionquestions_cssisevolvingtooslowly
                                isNumber: true
                      - id: utility-classes
                        aggregations:
                            opinion:
                                type: terms
                                field: opinionquestions_utility_nonsemantic_classes_center_largetext_etc_shouldbeavoided
                                isNumber: true
                      - id: selector-nesting
                        aggregations:
                            opinion:
                                type: terms
                                field: opinionquestions_selectornesting_foo_barulli_shouldbeavoided
                                isNumber: true
                      - id: programming-language
                        aggregations:
                            opinion:
                                type: terms
                                field: opinionquestions_cssisaprogramminglanguage
                                isNumber: true
                      - id: enjoy-css
                        aggregations:
                            opinion:
                                type: terms
                                field: opinionquestions_ienjoywritingcss
                                isNumber: true
                      - id: missing-features
                        aggregations:
                            features:
                                type: terms
                                field: opinionquestions_whatdoyoufeeliscurrentlymissingfromcss

###############################################################################
#
#  Dictionaries
#  used to map answers labels to ids.
#
###############################################################################
dictionaries:
    years_of_experience:
        - id: less-than-1
          label: Less than one year
        - id: 1-2
          label: 1-2 years
        - id: 2-5
          label: 2-5 years
        - id: 5-10
          label: 5-10 years
        - id: 10-20
          label: 10-20 years
        - id: more-than-20
          label: 20+ years

    usage:
        - id: used_it
          label: ðŸ‘ I've used it
        - id: know_not_used
          label: âœ… Know what it is, but haven't used it
        - id: never_heard_not_sure
          label: ðŸ¤· Never heard of it/Not sure what it is

    opinion:
        - id: would_use
          label: ðŸ‘ Used it > Would use again
        - id: would_not_use
          label: ðŸ‘Ž Used it > Would avoid
        - id: interested
          label: âœ… Heard of it > Would like to learn
        - id: not_interested
          label: ðŸš« Heard of it > Not interested
        - id: never_heard
          label: ðŸ¤· Never heard of it/Not sure what it is

###############################################################################
#
#  Normalizations
#  used to normalize value from freeform responses
#
###############################################################################
normalizations:
    pre_post_processors:
        - match: /auto?-?prefix(er)?/i
          replace: Autoprefixer
        - match: /^s(a|c)ss$/i
          replace: SASS
        - match: /compass/i
          replace: Compass
        - match: /css\s*modules/i
          replace: CSS Modules
        - match: /styled?.*components/i
          replace: styled-components
        - match: /css.*in.*js/i
          replace: CSS in JS
        - match: /css.*next/i
    
    css_frameworks:
        - match: /bass.*css/i
          replace: Basscss
        - match: /bootstrap/i
          replace: Bootstrap
        - match: /elm.*ui/i
          replace: elm-ui
        - match: /ionic/i
          replace: Ionic
        - match: /inuit/i
          replace: Inuit
        - match: /skeleton/i
          replace: Skeleton
        - match: /angular.*material/i
          replace: Angular Material
        - match: /^material$/i
          replace: Material
        - match: /spectre/i
          replace: Spectre
        - match: /blueprint/i
          replace: Blueprint
        - match: /styled?.*components/i
          replace: styled-components  
        - match: /material.*ui/i
          replace: Material UI
        - match: /bourbon/i
          replace: Bourbon
        - match: /vuetify/i
          replace: Vuetify
                   
    methodologies: []

    css_in_js:
        - match: /linaria/i
          replace: Linaria
        - match: /styled?.*components/i
          replace: styled-components
        - match: /fela/i
          replace: Fela
        - match: /astroturf/i
          replace: Astroturf
